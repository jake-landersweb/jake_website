{% extends "base.html" %}

{% block content %}

<!-- load the required scripts for highlighting code -->

<head>
    <script src="//unpkg.com/@highlightjs/cdn-assets@11.3.1/highlight.js"></script>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.3.1/languages/dart.min.js"></script>
    <script>hljs.highlightAll();</script>
    <title>{{ article.title }}</title>
    <meta name="title" content="{{ article.title }}">
    <meta name="description" content="{{ article.description }}">
    <meta name="tags" content="{{ article.get_tags }}">
    <meta name="date" content="{{ article.date }}">
</head>

<div>
    <div class="p-5 bg-cgray-600">
        <!-- for showing article metadata -->
        <div class="pb-5">
            <h1 class="text-4xl font-extrabold">
                {{ article.title }}
            </h1>
            <h2 class="text-md text-cgray-400">
                {{ article.date }}
            </h2>
            <p class="pb-2 text-cgray-400">
                {{ article.get_tags }}
            </p>
        </div>
        <!-- for showing video or image -->
        {% if article.image != "" or article.video != "" %}
        <div class="pb-8 md:grid md:grid-cols-4 md:grid-flow-col md:gap-8">
            {% if article.image != "" %}
            <div class="col-span-2 max-w-sm">
                <img src="{{ article.image.url }}" alt="{{ article.image.url }}">
            </div>
            {% endif %}
            {% if article.video != "" %}
            <div class="col-span-2">
                <video width="250" controls>
                    <source src="{{ article.video.url }}" type="video/mp4">
                    <source src="{{ article.video.url }}" type="video/ogg">
                    <b> {{ video.title }} </b>
                </video>
            </div>
            {% endif %}
        </div>
        {% endif %}
        <article class="prose sm:max-w-none md:max-w-5xl content-center">
            {{ article.body | safe }}
        </article>
    </div>
    <div class="pt-8"></div>
    <div class="p-5 bg-cgray-600">
        {% if replies|length > 0 %}
        <h2 class="text-3xl font-extrabold pb-3">
            Comments
        </h2>
        {% for reply in replies %}
        <div class="bg-cgray-700 rounded-lg p-5 max-w-2xl mb-5">
            <div class="pb-3">
                {{ reply.message }}
            </div>
            <div class="text-cgray-400">
                - {{ reply.name }}
            </div>
            <div class="text-xs">
                {{ reply.date }}
            </div>
        </div>
        {% endfor %}
        {% endif %}
        <div class="flex items-center max-w-2xl">
            <form class="w-full max-w-2xl bg-cgray-700 rounded-lg px-4 pt-2" action="" method="post">
                {% csrf_token %}
                <div class="flex flex-wrap -mx-3 mb-6">
                    <div>
                        <h2 class="px-4 pt-3 text-white text-lg">Leave me some feedback!</h2>
                        <h3 class="px-4 pb-2 text-cgray-400 text-sm">No account required</h3>
                    </div>
                    <div class="w-full px-3 mt-2">
                        <textarea
                            class="bg-cgray-600 rounded border border-cgray-600 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-cgray-400 focus:outline-none focus:border-indigo-400"
                            name="message" placeholder='Type Your Comment' required id="message"></textarea>
                    </div>
                    <div class="w-full px-3 mb-3 mt-2">
                        <input
                            class="bg-cgray-600 rounded border border-cgray-600 leading-normal resize-none w-full py-2 px-3 font-medium placeholder-cgray-400 focus:outline-none focus:border-indigo-400"
                            name="name" placeholder='Your Name (Optional)' id="name"></input>
                    </div>
                    <div class="w-full flex items-start px-3">

                        <div class="-mr-1">
                            <input type='submit'
                                class="hover:cursor-pointer bg-indigo-600 text-white font-medium py-1 px-4 rounded tracking-wide mr-1 hover:opacity-50"
                                value='Post Comment'>
                        </div>
                    </div>
            </form>
        </div>
    </div>
</div>
</div>

{% endblock content %}